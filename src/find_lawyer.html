<html> 
  <head>
    <title>Find a Lawyer in India | Verified Legal Experts Near You</title> 
    <link rel="icon" href="../images/fevicon.png" type="image/png">
    <meta name="description" content="Search for verified lawyers across India for cyber, civil, criminal, family, property, and business legal matters. Get connected with the right expert.">
    <meta name="keywords" content="find a lawyer India, verified lawyers, legal expert, civil lawyer, criminal lawyer, property lawyer">
    <link rel="stylesheet" href="../css/style.css">
    <style>
      body {
        font-family: aptos;
        background-color: rgb(230, 235, 241);
        cursor: default;
        padding: 0;
      }
      h1 {
        text-align: center;
      }
      .controls {
        display: flex;
        justify-content: center;
        gap: 10px;
        margin-bottom: 20px;
      }
      .controls input, .controls select {
        padding: 8px;
        font-size: 16px;
      }
      .lawyer-grid {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
        gap: 20px;
      }
      @media (max-width: 768px) {
        .lawyer-grid {
          grid-template-columns: repeat(1, 1fr); /* Single column on small devices */
        }
      }
      @media (max-width: 1024px) {
        .lawyer-grid {
          grid-template-columns: repeat(2, 1fr); /* 2 columns on medium screens */
        }
      }
      .card {
        background-color: rgba(117, 236, 247, 0.589);
        border-radius: 24px;
        box-shadow: 0 2px 5px rgba(0,0,0,0.1);
        padding: 16px;
        text-align: center;
        position: relative;
        height: 320px; /* Fixed height */
        display: flex;
        flex-direction: column;
        justify-content: space-between;
      }
      
      .card img {
        width: 100px;
        height: 100px;
        border-radius: 50%;
        object-fit: cover;
        margin: 0 auto 10px;
        transition: transform 0.3s ease;
      }
      
      .card img:hover {
        transform: scale(2.2);
        z-index: 10;
      }
      
      .card button {
        margin-top: 10px;
        background: #d9534f;
        border: none;
        color: white;
        padding: 6px 12px;
        border-radius: 6px;
        cursor: pointer;
        font-size: 14px;
      }
      .pagination {
        text-align: center;
        margin-top: 20px;
      }
      .pagination button {
        margin: 0 5px;
        padding: 5px 10px;
      }
      .toast {
        visibility: hidden;
        min-width: 250px;
        margin-left: -125px;
        background-color: #333;
        color: #fff;
        text-align: center;
        border-radius: 8px;
        padding: 12px;
        position: fixed;
        z-index: 999;
        left: 50%;
        bottom: 30px;
        font-size: 17px;
      }
      .toast.show {
        visibility: visible;
        animation: fadein 0.5s, fadeout 0.5s 2.5s;
      }
      @keyframes fadein {
        from {bottom: 0; opacity: 0;}
        to {bottom: 30px; opacity: 1;}
      }
      @keyframes fadeout {
        from {bottom: 30px; opacity: 1;}
        to {bottom: 0; opacity: 0;}
      }
    </style>
  </head>

  <body> 
   <header>
      <div id="nav-placeholder"></div>

      <script>
        fetch("menu.html")
          .then(response => response.text())
          .then(data => {
            document.getElementById("nav-placeholder").innerHTML = data;
          });
      </script>
    </header>
    <br>
    <div class="text-container-frontface">
      <span class="blinking-red">
        <a href="https://www.vakeelbabu.org" style="text-decoration: none; color: inherit;font-size: 50px;"></a>
        <h1>Find a Lawyer</h1>
      </span>
    </div>
    <br>
        <div class="controls">
          <input type="text" id="search" placeholder="Search by name or city">
          <select id="sort">
            <option value="">Sort by</option>
            <option value="name">Name</option>
            <option value="city">City</option>
          </select>
        </div>
    
        <!--div id="loader" class="spinner-container">
          <div class="spinner"></div>
          <p>Loading lawyers, please wait...</p>
        </div-->
    
        <div class="lawyer-grid" id="lawyerGrid"></div>
        <div class="pagination" id="pagination"></div>
        <div id="toast" class="toast"></div>
      
        <script>
          const scriptURL = 'https://script.google.com/macros/s/AKfycbw7o66zGCnK1cTgWVuGQ-0iQRXQrYqizCOD6fcN3fvkwIPKMoGU9cyM--62d6qFrdUfFw/exec';
          let lawyers = [];
          let filtered = [];
          let currentPage = 1;
          const pageSize = 8;
      
          async function fetchData() {
            const res = await fetch(scriptURL);
            lawyers = await res.json();
            filtered = [...lawyers];
            render();
          }
      
          function render() {
            const grid = document.getElementById("lawyerGrid");
            grid.innerHTML = "";
            const start = (currentPage - 1) * pageSize;
            const pageItems = filtered.slice(start, start + pageSize);
            pageItems.forEach(l => {
              const card = document.createElement("div");
              card.className = "card";
              card.innerHTML = `
                <img src="${l.photo}" alt="photo">
                <h3>${l.name}</h3>
                <p>${l.city}</p>
                <p>${l.phone}</p>
                <button onclick="deleteLawyer('${l.phone}')">Delete</button>
              `;
              grid.appendChild(card);
            });
            renderPagination();
          }
      
          function renderPagination() {
            const totalPages = Math.ceil(filtered.length / pageSize);
            const pagination = document.getElementById("pagination");
            pagination.innerHTML = "";
            for (let i = 1; i <= totalPages; i++) {
              const btn = document.createElement("button");
              btn.textContent = i;
              if (i === currentPage) btn.style.fontWeight = "bold";
              btn.onclick = () => { currentPage = i; render(); };
              pagination.appendChild(btn);
            }
          }
      
          function deleteLawyer(phone) {
            const code = prompt("Enter Admin Code to delete:");
            if (!code) return;
            fetch(`${scriptURL}?phone=${phone}&code=${encodeURIComponent(code)}`, {
              method: 'DELETE'
            }).then(r => r.text()).then(msg => {
              if (msg === "DELETED") {
                showToast("Deleted successfully");
                lawyers = lawyers.filter(l => l.phone !== phone);
                filtered = filtered.filter(l => l.phone !== phone);
                render();
              } else {
                showToast("Delete failed: " + msg);
              }
            });
          }
      
          function showToast(message) {
            const toast = document.getElementById("toast");
            toast.textContent = message;
            toast.className = "toast show";
            setTimeout(() => toast.className = "toast", 3000);
          }
      
          document.getElementById("search").addEventListener("input", e => {
            const q = e.target.value.toLowerCase();
            filtered = lawyers.filter(l => l.name.toLowerCase().includes(q) || l.city.toLowerCase().includes(q));
            currentPage = 1;
            render();
          });
      
          document.getElementById("sort").addEventListener("change", e => {
            const val = e.target.value;
            if (val === "name") filtered.sort((a, b) => a.name.localeCompare(b.name));
            if (val === "city") filtered.sort((a, b) => a.city.localeCompare(b.city));
            render();
          });
      
          fetchData();
        </script>

    <script type="text/javascript">
        function googleTranslateElementInit() {
          new google.translate.TranslateElement({
            pageLanguage: 'en',
            includedLanguages: 'en,hi,es,fr,de', // customize the languages
            layout: google.translate.TranslateElement.InlineLayout.SIMPLE
          }, 'google_translate_element');
        }
    </script>
    <script type="text/javascript" src="//translate.google.com/translate_a/element.js?cb=googleTranslateElementInit"></script>
                
    <!-- JavaScript to fix the menu on top while scrolling-->
    <script>
      const scrollmenu = document.getElementById("scrollmenu");
      const offsetTop = scrollmenu.offsetTop;

      window.addEventListener("scroll", function () {
        if (window.pageYOffset >= offsetTop) {
          scrollmenu.classList.add("fixed");
        } else {
          scrollmenu.classList.remove("fixed");
        }
      });
    </script>
  </body>
</html>
