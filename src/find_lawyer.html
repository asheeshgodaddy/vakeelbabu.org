<html> 
  <head>
    <title>Find a Lawyer in India | Verified Legal Experts Near You</title> 
    <meta name="description" content="Search for verified lawyers across India for cyber, civil, criminal, family, property, and business legal matters. Get connected with the right expert.">
    <meta name="keywords" content="find a lawyer India, verified lawyers, legal expert, civil lawyer, criminal lawyer, property lawyer">
    <link rel="stylesheet" href="../css/top_menu.css">
    <link rel="stylesheet" href="../css/menu-2.css">
    <link rel="stylesheet" href="../css/txt_style.css">
    <link rel="stylesheet" href="../css/page_pane.css">
    <style>
      body {
        font-family: Arial, sans-serif;
        padding: 20px;
      }
      .filter-box {
        margin-bottom: 20px;
      }
      input {
        margin: 5px;
        padding: 8px;
        width: 200px;
      }
      .lawyer-card {
        display: inline-block;
        border: 1px solid #ccc;
        padding: 12px;
        border-radius: 12px;
        margin: 10px;
        width: 220px;
        text-align: center;
        box-shadow: 0 0 5px rgba(0,0,0,0.1);
        position: relative;
      }
      .lawyer-card img {
        width: 100px;
        height: 100px;
        object-fit: cover;
        border-radius: 50%;
      }
      .lawyer-info {
        margin-top: 10px;
      }
      .delete-btn {
        background-color: red;
        color: white;
        border: none;
        padding: 5px;
        cursor: pointer;
        position: absolute;
        top: 5px;
        right: 5px;
      }
      .pagination {
        margin-top: 20px;
      }
      .pagination button {
        margin: 0 5px;
        padding: 5px 10px;
      }
    </style>
  </head>

  <body> 
    <div class="navbar">
        <div class="menu">
          <a href="../index.html">Indian Kanoon</a>
          <a href="../index.html">Indian Penal Code</a>
          <a href="../index.html">Ask a Free Question</a>
          <a href="../index.html">Talk To A Lawyer</a>
          <a href="../index.html">Free legal advice</a>
          <a href="../index.html">Lawyer Signup</a>
          <a href=""></a>
          <a href=""></a>
          <a href=""></a>
          <a href=""></a>
          <a href=""></a>
          <a href=""></a>
          <a href=""></a>
          <a href=""></a>
          <a>Dial us: +91-95550 07911</a>
        </div>
        <div class="language-selector"; id="google_translate_element">
            <img src="../images/change_language.png" style="height:20px; width:50px; margin-top:5px;">
            <select>
                <option value="en">English</option>
                <option value="hi">हिन्दी</option>
                <option value="es">Español</option>
            </select>
        </div>
      </div>
     
    <header>
        <img src="../images/full_banner.png">
         <nav>
        </div>
            <div class="scrollmenu" id="scrollmenu">
              <a href="../index.html">Home</a>
              <a href="about.html">About</a>
              <a href="find_lawyer.html">Find a Lawyer</a>
              <a href="legal_advice.html">Legal Advice</a>
              <a href="ipc.html">IPC Section</a>
              <a href="bns.html">BNS Section</a>
              <a href="blog.html">Blogs</a>
              <a href="myaccount.html">My Account</a>  
              <a href="contact.html">Contact Us</a>
              </div>
         </nav>
     </header>
    <div class="container">
      <div class="text-container">
      <h2>Find a Lawyer</h2>

      <div class="filter-box">
        <input type="text" id="filterName" placeholder="Search by name">
        <input type="text" id="filterCity" placeholder="Search by city">
        <input type="password" id="adminCode" placeholder="Admin Code (for delete)">
      </div>
    
      <div id="lawyerList">Loading...</div>
      <div class="pagination" id="pagination"></div>
    
      <script>
        const SHEET_URL = "https://script.google.com/macros/s/AKfycbyvzJ2Rvzsqy3CLYXTH4vVIvv2M8bzWcEeBBAL94dSjCbw3mcDUbipxQiYMFzIhCcdwew/exec";
        const DELETE_URL = SHEET_URL; // Same endpoint handles GET/DELETE
        let allLawyers = [];
        let currentPage = 1;
        const itemsPerPage = 6;
    
        async function fetchLawyers() {
          try {
            const res = await fetch(SHEET_URL);
            const data = await res.json();
            allLawyers = data;
            renderPage();
          } catch (err) {
            document.getElementById("lawyerList").textContent = "Failed to load data.";
            console.error("Error fetching lawyers:", err);
          }
        }
    
        function renderPage() {
          const nameVal = document.getElementById("filterName").value.toLowerCase();
          const cityVal = document.getElementById("filterCity").value.toLowerCase();
          const filtered = allLawyers.filter(lawyer =>
            lawyer.name.toLowerCase().includes(nameVal) &&
            lawyer.city.toLowerCase().includes(cityVal)
          );
    
          const totalPages = Math.ceil(filtered.length / itemsPerPage);
          currentPage = Math.min(currentPage, totalPages);
          const start = (currentPage - 1) * itemsPerPage;
          const end = start + itemsPerPage;
          const paginated = filtered.slice(start, end);
    
          displayLawyers(paginated);
          displayPagination(totalPages);
        }
    
        function displayLawyers(lawyers) {
          const container = document.getElementById("lawyerList");
          container.innerHTML = "";
    
          if (lawyers.length === 0) {
            container.textContent = "No matching lawyers found.";
            return;
          }
    
          lawyers.forEach(lawyer => {
            const card = document.createElement("div");
            card.className = "lawyer-card";
    
            const img = document.createElement("img");
            img.src = lawyer.photo || "";
            img.alt = lawyer.name;
    
            const info = document.createElement("div");
            info.className = "lawyer-info";
            info.innerHTML = `<strong>${lawyer.name}</strong><br>${lawyer.city}<br>${lawyer.phone}`;
    
            const btn = document.createElement("button");
            btn.className = "delete-btn";
            btn.textContent = "X";
            btn.onclick = () => deleteLawyer(lawyer.phone);
    
            card.appendChild(img);
            card.appendChild(info);
            card.appendChild(btn);
            container.appendChild(card);
          });
        }
    
        function displayPagination(totalPages) {
          const pagination = document.getElementById("pagination");
          pagination.innerHTML = "";
    
          for (let i = 1; i <= totalPages; i++) {
            const btn = document.createElement("button");
            btn.textContent = i;
            btn.disabled = i === currentPage;
            btn.onclick = () => {
              currentPage = i;
              renderPage();
            };
            pagination.appendChild(btn);
          }
        }
    
        async function deleteLawyer(phone) {
          const code = document.getElementById("adminCode").value;
          if (!code) return alert("Enter admin code to delete.");
    
          if (!confirm("Are you sure to delete this entry?")) return;
    
          try {
            const res = await fetch(`${DELETE_URL}?code=${code}&phone=${phone}`);
            const text = await res.text();
            if (text === "DELETED") {
              alert("Entry deleted successfully.");
              fetchLawyers();
            } else {
              alert("Failed to delete: " + text);
            }
          } catch (err) {
            alert("Error deleting entry.");
            console.error(err);
          }
        }
    
        document.getElementById("filterName").addEventListener("input", renderPage);
        document.getElementById("filterCity").addEventListener("input", renderPage);
    
        fetchLawyers();
      </script>
      </div>
      <div class="image-section">
        <img src="../images/sc.png" alt="Lawyer at work">
      </div>
    </div> 
    <script type="text/javascript">
        function googleTranslateElementInit() {
          new google.translate.TranslateElement({
            pageLanguage: 'en',
            includedLanguages: 'en,hi,es,fr,de', // customize the languages
            layout: google.translate.TranslateElement.InlineLayout.SIMPLE
          }, 'google_translate_element');
        }
    </script>
    <script type="text/javascript" src="//translate.google.com/translate_a/element.js?cb=googleTranslateElementInit"></script>
                
    <!-- JavaScript to fix the menu on top while scrolling-->
    <script>
      const scrollmenu = document.getElementById("scrollmenu");
      const offsetTop = scrollmenu.offsetTop;

      window.addEventListener("scroll", function () {
        if (window.pageYOffset >= offsetTop) {
          scrollmenu.classList.add("fixed");
        } else {
          scrollmenu.classList.remove("fixed");
        }
      });
    </script>
  </body>
</html>
